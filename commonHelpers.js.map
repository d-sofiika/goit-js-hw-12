{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\n\nexport async function doFetch(nameImg, page) {\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const API_KEY = \"43384169-ca1a4d081c57b6f9f4fa25679\";\n\n\n    \n    const response = await axios({\n        baseURL: BASE_URL, params: {\n            key: API_KEY,\n            q: nameImg,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page,\n    \n        },\n    });\n    return response.data;\n        \n}\n","export function createMarkup(obj) {\n  const arr = obj.hits;\n  return arr.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => `\n    <li class=\"card-item\">\n        <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img-web\"/>\n        </a>\n        <div class=\"information\">\n            <div class=\"descr\">\n                <p class=\"text\">Likes</p>\n                <span class=\"value\">${likes}</span>\n            </div>\n            <div class=\"descr\">\n                <p class=\"text\">Views</p>\n                <span class=\"value\">${views}</span>\n            </div>\n            <div class=\"descr\">\n                <p class=\"text\">Comments</p>\n                <span class=\"value\">${comments}</span>\n            </div>\n            <div class=\"descr\">\n                <p class=\"text\">Downloads</p>\n                <span class=\"value\">${downloads}</span>\n            </div>\n        </div>\n    </li>\n    `\n    )\n    .join('');\n}\n","import { doFetch } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nimport axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form-search');\nconst btnMore = document.querySelector('.more-btn');\nconst placeImg = document.querySelector('.card-container');\nconst loader = document.querySelector('.loader');\n\nloader.style.display = 'none';\nbtnMore.hidden = true;\nbtnMore.disabled = true;\n\nconst book = new SimpleLightbox('.card-item a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', handleSubmit);\nbtnMore.addEventListener('click', searchMore);\n\nlet page = 1;\nlet limite;\nlet nameImg;\nbtnMore.disabled = true;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  placeImg.innerHTML = '';\n  loader.style.display = 'block';\n  btnMore.hidden = true;\n  btnMore.disabled = true;\n  page = 1;\n\n  nameImg = event.currentTarget.elements.text.value;\n  setTimeout(() => {\n  doFetch(nameImg, page)\n    .then(data => {\n      limite = Math.floor(data.totalHits / 15);\n      console.log(limite);\n      if (nameImg === '' || data.hits.length === 0) {\n        iziToast.show({\n          title: 'Ops.',\n          titleColor: 'white',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: 'white',\n          color: 'red',\n          position: 'topRight',\n        });\n      } else {\n        placeImg.insertAdjacentHTML('beforeend', createMarkup(data));\n        btnMore.disabled = false;\n\n        if (placeImg.hasChildNodes() && page < limite) {\n          btnMore.hidden = false;\n        }\n        book.refresh();\n        event.target.reset();\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        titleColor: 'white',\n        message: 'Oops!',\n        messageColor: 'white',\n        balloon: true,\n        position: 'topRight',\n        progressBarColor: 'black',\n        transitionIn: 'bounceInRight',\n      });\n    })\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n    }, 1000);\n}\n\nasync function searchMore() {\n  btnMore.hidden = true;\n  loader.style.display = 'block';\n  const card = document.querySelector('.card-item');\n  const cardHeight = card.getBoundingClientRect().height;\n  \n  \n  btnMore.disabled = true;\n  page += 1;\n  \n  try {\n    loader.style.display = 'block';\n    btnMore.hidden = true;\n    \n    const value = await doFetch(nameImg, page);\n    \n    \n    setTimeout(() => { placeImg.insertAdjacentHTML('beforeend', createMarkup(value));}, 500);\n    \n    btnMore.disabled = false;\n    \n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    setTimeout(() =>{loader.style.display = 'none';\n    btnMore.hidden = false;}, 500);\n    if (page >= limite) {\n      btnMore.hidden = true;\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: 'white',\n        color: 'blue',\n        position: 'topRight',\n      });\n    \n    \n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      titleColor: 'white',\n      message: 'Oops!',\n      messageColor: 'white',\n      balloon: true,\n      position: 'topRight',\n      progressBarColor: 'black',\n      transitionIn: 'bounceInRight',\n    });\n  }\n}\n"],"names":["doFetch","nameImg","page","axios","createMarkup","obj","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","btnMore","placeImg","loader","book","SimpleLightbox","handleSubmit","searchMore","limite","event","data","iziToast","error","cardHeight","value"],"mappings":"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"}